## Directory Structure Introduction
``` 
├── LessEqualKernelInvocation
│   ├── cmake                   // Compilation project files
│   ├── input                   // Directory for storing input data generated by scripts
│   ├── output                  // Directory for storing output data and ground truth data
│   ├── scripts
│   │   ├── acl.json            // ACL configuration file
│   │   ├── gen_data.py         // Script to verify if the output data matches the ground truth data
│   │   └── verify_result.py    // Ground truth comparison file
│   ├── less_equal.cpp          // Operator kernel implementation
│   ├── less_equal_tiling.h     // Operator tiling implementation
│   ├── CMakeLists.txt          // Compilation project file
│   ├── data_utils.h            // Data input and output functions
│   ├── main.cpp                // Main function, application invoking the operator, including CPU and NPU domain calls
│   └── run.sh                  // Script to compile and run the operator
``` 

## Code Implementation Introduction
This invocation example implements the generalized shape LessEqual operator.

- Kernel Implementation   
  The mathematical expression for the LessEqual operator is:  
  ```
  y = x1 <= x2
  ```
  The calculation logic is: The vector calculation interfaces provided by Ascend C operate on LocalTensor elements. The input data needs to be first transferred into on-chip memory, then the calculation interfaces are used to compare the two input parameters x1 and x2, and the final result y is obtained and transferred out to external memory.
  
  The implementation process of the LessEqual operator is divided into three basic tasks: CopyIn, Compute, and CopyOut. The CopyIn task is responsible for transferring the input Tensor xGm, yGm, and zGm from Global Memory to Local Memory, stored in x1Local and x2Local. The Compute task is responsible for performing operations on x1Local and x2Local, with the results stored in yLocal. The CopyOut task is responsible for transferring the output data from yLocal to the output Tensor outGm in Global Memory. For details, please refer to [less_equal.cpp](./less_equal.cpp).

- Invocation Implementation  
  1. CPU-side validation is mainly accomplished through interfaces provided by the CPU debugging library such as ICPU_RUN_KF CPU debugging macros;  
  2. NPU-side validation is mainly accomplished through the use of the <<<>>> kernel invocation operator.  
  
The application distinguishes between code logic running on the CPU side and the NPU side using the ASCENDC_CPU_DEBUG macro.

## Running the Example Operator
- Open the example directory

  ```bash
  cd ${git_clone_path}/samples/operator_contrib/LessEqualSample/KernelLaunch/LessEqualKernelInvocation
  ```

- Configure environment variables

  Please select the corresponding command to configure environment variables based on the [installation method](https://hiascend.com/document/redirect/CannCommunityInstSoftware) of the CANN development toolkit package on the current environment.
  - Default path, root user installs CANN software package
    ```bash
    export ASCEND_INSTALL_PATH=/usr/local/Ascend/ascend-toolkit/latest
    ```
  - Default path, non-root user installs CANN software package
    ```bash
    export ASCEND_INSTALL_PATH=$HOME/Ascend/ascend-toolkit/latest
    ```
  - Specified path install_path, installs CANN software package
    ```bash
    export ASCEND_INSTALL_PATH=${install_path}/ascend-toolkit/latest
    ```
  
  Configure the simulation mode log file directory, default is sim_log.
  ```bash
  export CAMODEL_LOG_PATH=./sim_log
  ```

- Example execution

  ```bash
  bash run.sh -r [RUN_MODE] -v  [SOC_VERSION] 
  ```
  - RUN_MODE: Compilation method, can choose CPU debugging, NPU simulation, NPU on-board. Supported parameters are [cpu / sim / npu], default is cpu.
  - SOC_VERSION: Ascend AI processor model. If you are unsure of the specific [SOC_VERSION], execute the npu-smi info command on the server with the Ascend AI processor to query it. Add the Ascend information before the "Name" value, for example, if "Name" corresponds to the value xxxyy, the actual configured [SOC_VERSION] value is Ascendxxxyy. Supported parameter values (replace xxx with the specific value):
    - Atlas inference series products (Ascend 310P processor) parameter values: Ascend310P1, Ascend310P3
    - Atlas training series products parameter values: AscendxxxA, AscendxxxB
    - Atlas A2 training series products parameter values: AscendxxxB1, AscendxxxB2, AscendxxxB3, AscendxxxB4

  Note: There may be precision issues when using NPU simulation debugging for Atlas training series products. You can choose other chips for NPU simulation debugging.

  Example:
  ```bash
  bash run.sh -r cpu -v Ascend310P1
  ```   

## Update Log
| Date       | Update Item |
|------------|-------------|
| 2023/5/24  | Added this readme |
| 2024/07/24 | Modified readme format |